# Ralph Progress Log
Started: Sun Jan 25 18:19:00 JST 2026
---

[2026-01-25 18:35:00] Story: US-001 Remove dual route files
Implemented: Removed dual route file pattern and adopted single engine route pattern
Files:
- config/routes_standalone_app.rb (deleted)
- config/routes_oroshi_engine.rb (deleted)
- config/routes.rb (updated comments)
- oroshi.gemspec (simplified, removed file exclusions)
Tests: PASSING (engine routes load correctly with 261 routes, model tests pass)
Learnings for future iterations:
- Oroshi uses single route file pattern: config/routes.rb with Oroshi::Engine.routes.draw
- Parent apps mount with: mount Oroshi::Engine, at: "/oroshi"
- sandbox script already generates its own routes.rb that mounts the engine
- gemspec no longer needs to exclude any config files
- Engine route helpers work without prefix inside engine, use oroshi.* prefix from parent

[2026-01-25 19:30:00] Story: US-002 Update sandbox generation script
Implemented: Fixed port inconsistency and verified sandbox generation works correctly
Files:
- bin/sandbox (updated port 3000 -> 3001 in 3 places)
- lib/tasks/sandbox.rake (updated port 3000 -> 3001)
Tests: PASSING (sandbox creates, routes load, model tests pass)
Learnings for future iterations:
- Sandbox runs on port 3001 to avoid conflicts with development server (port 3000)
- Routes file is GENERATED by bin/sandbox, not copied from gem
- Generated routes.rb demonstrates proper engine mounting pattern for parent apps
- Sandbox uses bin/dev which reads Procfile.dev for port configuration
- All port references must be consistent: bin/sandbox, sandbox.rake, CLAUDE.md, prompt.md

[2026-01-26 08:35:00] Story: US-003 Update test environment configuration
Implemented: Verified test environment already correctly configured for engine routes
Files:
- test/test_helper.rb (verified - uses Oroshi::Engine.routes.url_helpers)
- test/application_system_test_case.rb (verified - uses oroshi helper method)
- test/dummy/config/routes.rb (verified - properly mounts engine at /oroshi)
Tests: PASSING (controller: 26, integration: 11, system: 4 - all pass)
Learnings for future iterations:
- Test environment was already correct - previous work established the pattern
- test_helper.rb provides oroshi helper method returning Oroshi::Engine.routes.url_helpers
- Integration tests use oroshi_* helper methods (e.g., oroshi_root_path, oroshi_orders_path)
- System tests use same pattern via ApplicationSystemTestCase
- No routes_standalone_app.rb references in test directory (confirmed with grep)
- Sass deprecation warnings are from external gems (Bootstrap), not asset loading errors
- Rails deprecation warnings for resource hash arguments are cosmetic
