@use "analysis";
@use "documents";
@use "expiration_cards";
@use "forcasts";
@use "markets";
@use "materials";
@use "messages";
@use "oyster_invoices";
@use "oyster_supplies";
@use "products";
@use "profits";
@use "suppliers";
@use "welcome";
@use "yahoo_orders";

/* Fixes */
.lg-prepend-fix {
  height: calc(2.875rem + 2px);
}
svg.bi {
  bottom: 2px;
  position: relative;
}

/* Turbo Loading Bar */
.turbo-progress-bar {
  height: 6px;
  background-color: #caed09;
}

.picker-switch table {
  width: 100%;
  text-align: center;
}

.timepicker-picker {
  text-align: center;
}

/* Standards */
/* Japanese font standards info: https://stackoverflow.com/a/69312090/6759431 */

body {
  background-color: white;
  font-family:
    "メイリオ", "Hiragino Kaku Gothic Pro", Meiryo, "ヒラギノ角ゴ Pro W3",
    "MS PGothic", "MS UI Gothic", Helvetica, Arial, sans-serif;
}

#index .card-columns {
  @include media-breakpoint-only(sm) {
    column-count: 1;
  }
  @include media-breakpoint-only(md) {
    column-count: 1;
  }
  @include media-breakpoint-only(lg) {
    column-count: 2;
  }
  @include media-breakpoint-only(xl) {
    column-count: 2;
  }
}

/* Notification - Stimulus Components */
.notice_container {
  display: block;
  position: fixed;
  bottom: 50px;
  right: 50px;
  z-index: 9999;
  width: 400px;
  text-align: left;
  animation: slideInRight 0.3s ease-out;
}

.notice_container .alert {
  margin-bottom: 0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Alert container animations */
.alert_container {
  display: block;
  position: fixed;
  bottom: 50px;
  right: 50px;
  z-index: 9999;
  width: 400px;
  text-align: left;
  animation: slideInRight 0.3s ease-out;
}

.alert_container .alert {
  margin-bottom: 0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Notification hide animation */
[data-controller="notification"][data-notification-hidden-value="true"] {
  animation: slideOutRight 0.3s ease-in forwards;
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOutRight {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

/* Dialog Modals - Stimulus Components */
dialog[data-dialog-target="dialog"],
dialog[data-oroshi--supplies--dialog-target="dialog"],
dialog[data-oroshi--orders--order-dialog-target="dialog"] {
  border: none;
  border-radius: 0.5rem;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  max-width: 90vw;
  max-height: 90vh;
  overflow: auto;
  padding: 0;

  /* Ensure proper max-width for lg modals */
  &.order-modal,
  &.supply-modal {
    max-width: 1000px; /* modal-lg */
    border: 2px solid #4ecdc4; /* Primary brand color - greenish-cyan */
    border-radius: 0.75rem;

    .modal-header {
      background: linear-gradient(135deg, #4ecdc4 0%, #6ba3d4 100%);
      color: white;
      border-top-left-radius: calc(0.75rem - 2px);
      border-top-right-radius: calc(0.75rem - 2px);
      padding: 1rem 1.5rem;

      .btn-close {
        filter: brightness(0) invert(1);
        opacity: 0.8;

        &:hover {
          opacity: 1;
        }
      }
    }

    .modal-body {
      padding: 1.5rem;
    }

    .modal-footer {
      border-bottom-left-radius: calc(0.75rem - 2px);
      border-bottom-right-radius: calc(0.75rem - 2px);
      background-color: #f8f9fa;
      padding: 1rem 1.5rem;
    }
  }

  &.dismiss-checklist-modal {
    max-width: 500px; /* default modal-dialog size */
  }
}

/* Dialog backdrop with smooth animation */
dialog[data-dialog-target="dialog"]::backdrop,
dialog[data-oroshi--supplies--dialog-target="dialog"]::backdrop,
dialog[data-oroshi--orders--order-dialog-target="dialog"]::backdrop {
  background-color: rgba(0, 0, 0, 0.5);
  animation: fadeIn 0.2s ease-out;
}

/* Opening animation for dialog */
dialog[data-dialog-target="dialog"][open],
dialog[data-oroshi--supplies--dialog-target="dialog"][open],
dialog[data-oroshi--orders--order-dialog-target="dialog"][open] {
  animation: slideUp 0.3s ease-out;
}

/* Closing animation for dialog */
dialog[data-dialog-target="dialog"][closing],
dialog[data-oroshi--supplies--dialog-target="dialog"][closing],
dialog[data-oroshi--orders--order-dialog-target="dialog"][closing] {
  animation: slideDown 0.3s ease-in forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideDown {
  from {
    transform: translateY(0);
    opacity: 1;
  }
  to {
    transform: translateY(30px);
    opacity: 0;
  }
}

/* Ensure dialog scrolling doesn't affect body */
body:has(dialog[data-dialog-target="dialog"][open]),
body:has(dialog[data-oroshi--supplies--dialog-target="dialog"][open]),
body:has(dialog[data-oroshi--orders--order-dialog-target="dialog"][open]) {
  overflow: hidden;
}

.vertical {
  writing-mode: vertical-rl;
  text-orientation: upright;
}

// For fixed scroll elements
.scroll {
  max-height: 500px;
  overflow-y: auto;
}

#messages-container {
  border-top: 1px dotted #ccc;
}

/* Navbar OROSHI Branding */
.oroshi-brand {
  font-weight: 900;
  font-size: 1.75rem;
  letter-spacing: -0.03em;
  line-height: 1;
  color: #333;
  text-decoration: none;
  transition: color 0.2s ease;
}

.oroshi-brand:hover {
  color: #e67e22;
}

@media (max-width: 991.98px) {
  .oroshi-brand {
    font-size: 1.5rem;
  }
}

.dropdown-submenu {
  position: relative;
}

.dropdown-submenu a::after {
  transform: rotate(-90deg);
  position: absolute;
  right: 6px;
  top: 0.8em;
}

.dropdown-submenu .dropdown-menu {
  top: 0;
  left: 100%;
  margin-left: 0.1rem;
  margin-right: 0.1rem;
}

/* Charts.js front page 4-up sizing*/
.charts .row {
  height: 35vh;
}

/* Styling even and odd table style items */
.even,
.odd,
.rowhead {
  padding: 5px;
  box-sizing: border-box;
}

.even {
  background-color: $white;
  border: 1px solid $silver;
}

.odd {
  background-color: $silver;
}

.rowhead {
  background-color: $silver;
}

/* Input styling */

input[type="number"] {
  -moz-appearance: textfield;
  appearance: textfield;
  margin: 0;
}

input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.blank_button {
  border: 0;
  background-color: transparent;
  padding: 0;
  margin: 0;
  color: white;
}

/* Calendar */

.order-modal {
  max-width: 90vw;

  // Responsive width based on screen size
  @media (min-width: 576px) {
    min-width: 500px;
  }

  @media (min-width: 768px) {
    min-width: 700px;
  }

  @media (min-width: 992px) {
    min-width: 900px;
  }
}

.loading_overlay {
  height: 100%;
  width: 100%;
  position: absolute;
  z-index: 9;
  opacity: 0.25;
  background: linear-gradient(90deg, #ffffff, #000000);
  background-size: 1000% 1000%;
  -webkit-animation: gradientAnime 1.8s ease infinite;
  -moz-animation: gradientAnime 1.8s ease infinite;
  animation: gradientAnime 1.8s ease infinite;
}

@-webkit-keyframes gradientAnime {
  0% {
    background-position: 0% 96%;
  }
  50% {
    background-position: 100% 5%;
  }
  100% {
    background-position: 0% 96%;
  }
}
@-moz-keyframes gradientAnime {
  0% {
    background-position: 0% 96%;
  }
  50% {
    background-position: 100% 5%;
  }
  100% {
    background-position: 0% 96%;
  }
}
@keyframes gradientAnime {
  0% {
    background-position: 0% 96%;
  }
  50% {
    background-position: 100% 5%;
  }
  100% {
    background-position: 0% 96%;
  }
}

.pagination {
  text-align: center;
  padding: 0.3em;
  cursor: default;
  margin: 10px auto;
  display: block;
  a,
  span,
  em {
    padding: 0.3em;
    border-radius: 4px;
  }
  .disabled {
    color: #aaaaaa;
  }
  .current {
    font-style: normal;
    font-weight: bold;
    color: $terra;
  }
  a {
    border: 1px solid #dddddd;
    color: $terra;
    text-decoration: none;
  }
  a:hover,
  a:focus {
    border-color: $blackcoral;
    background: $blackcoral;
    color: white;
  }
  .page_info {
    color: #aaaaaa;
    padding-top: 0.8em;
  }
  .previous_page,
  .next_page {
    border-width: 1px;
  }
  .previous_page {
    margin-right: 1em;
  }
  .next_page {
    margin-left: 1em;
  }
}

.disable_wall {
  background-color: white;
  opacity: 70%;
  position: absolute;
  top: 0;
  z-index: 999999;
  left: 0;
  display: block;
  width: 100%;
  height: 100%;
}

.tippy-box[data-theme~="light-border"] {
  width: 350px;
  text-align: left;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  border-radius: 4px;

  .tippy-content {
    padding: 0.75rem 1rem;
  }
}

.tippy-box[data-theme~="exp_card"] {
  width: 280px;
  opacity: 0.9;
  text-align: left;
}

.tippy-box[data-theme~="supply_cal"] {
  width: 350px;
  opacity: 0.9;
  text-align: left;
}

.tippy_tab .nav-link.active {
  color: $dark !important;
}

#notifications {
  width: 380px;
  position: fixed;
  top: 74px;
  right: 0;
  min-height: 0px;
  height: auto;
  max-height: 100vh;
  overflow-y: scroll;
  overflow-x: hidden;
  scrollbar-width: thin;
  scrollbar-color: #ccc #fff;
  z-index: 1;
}

#notifications::-webkit-scrollbar {
  width: 12px;
}

#notifications::-webkit-scrollbar-track {
  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
  border-radius: 10px;
}

#notifications::-webkit-scrollbar-thumb {
  border-radius: 10px;
  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5);
}

.toast {
  position: relative;
  bottom: 0;
  right: 0;
}

.cursor-alias {
  cursor: alias !important;
}
.cursor-all-scroll {
  cursor: all-scroll !important;
}
.cursor-auto {
  cursor: auto !important;
}
.cursor-cell {
  cursor: cell !important;
}
.cursor-context-menu {
  cursor: context-menu !important;
}
.cursor-col-resize {
  cursor: col-resize !important;
}
.cursor-copy {
  cursor: copy !important;
}
.cursor-crosshair {
  cursor: crosshair !important;
}
.cursor-default {
  cursor: default !important;
}
.cursor-e-resize {
  cursor: e-resize !important;
}
.cursor-ew-resize {
  cursor: ew-resize !important;
}
.cursor-grab {
  cursor: -webkit-grab !important;
  cursor: grab !important;
}
.cursor-grabbing {
  cursor: -webkit-grabbing !important;
  cursor: grabbing !important;
}
.cursor-help {
  cursor: help !important;
}
.cursor-move {
  cursor: move !important;
}
.cursor-n-resize {
  cursor: n-resize !important;
}
.cursor-ne-resize {
  cursor: ne-resize !important;
}
.cursor-nesw-resize {
  cursor: nesw-resize !important;
}
.cursor-ns-resize {
  cursor: ns-resize !important;
}
.cursor-nw-resize {
  cursor: nw-resize !important;
}
.cursor-nwse-resize {
  cursor: nwse-resize !important;
}
.cursor-no-drop {
  cursor: no-drop !important;
}
.cursor-none {
  cursor: none !important;
}
.cursor-not-allowed {
  cursor: not-allowed !important;
}
.cursor-pointer {
  cursor: pointer !important;
}
.cursor-progress {
  cursor: progress !important;
}
.cursor-row-resize {
  cursor: row-resize !important;
}
.cursor-s-resize {
  cursor: s-resize !important;
}
.cursor-se-resize {
  cursor: se-resize !important;
}
.cursor-sw-resize {
  cursor: sw-resize !important;
}
.cursor-text {
  cursor: text !important;
}
.cursor-w-resize {
  cursor: w-resize !important;
}
.cursor-wait {
  cursor: wait !important;
}
.cursor-zoom-in {
  cursor: zoom-in !important;
}
.cursor-zoom-out {
  cursor: zoom-out !important;
}

.no-bs-validation {
  .is-valid,
  .is-invalid {
    border-color: $gray-400;
    background-image: inherit;
    &:focus {
      border-color: inherit;
      box-shadow: 0 0 0 0.2rem $gray-400;
    }
  }
}

.no-select {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* FullCalendar Modifications */

@media (max-width: 768px) {
  .fc-toolbar,
  .fc-toolbar-chunk {
    flex-wrap: wrap-reverse;
    align-content: center;
    align-items: center;
    vertical-align: middle;
    gap: 0.25rem;
    text-align: center;
    justify-content: center;
  }
  .fc-toolbar {
    display: grid !important;
    margin-bottom: 0.5em !important;
  }
  .fc-toolbar-chunk {
    display: flex !important;
  }
}
