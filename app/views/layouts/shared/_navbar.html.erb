<nav id="top_nav" class="navbar navbar-light bg-light navbar-expand-lg px-3" data-turbo-permanent>
    <%= link_to root_path, class: 'navbar-brand p-0 d-block d-lg-none', data: { turbo: false } do %>
    <span class="oroshi-brand">OROSHI</span>
    <% end %>
    <button class="navbar-toggler m-1 float-end bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#navbar_t" aria-controls="navbar_t" aria-expanded="false" aria-label="トグルナビ">
        <%= icon('menu-down', class: 'text-primary') %>
    </button>
    <div class="collapse navbar-collapse" id="navbar_t">
        <%= link_to root_path, class: 'navbar-brand m-0 p-0 d-none d-lg-block' do %>
        <span class="oroshi-brand">OROSHI</span>
        <% end %>
        <% if user_signed_in? %>
        <ul class="navbar-nav h5 ms-3 me-auto mt-2 mt-lg-0">
            <li><%= link_to "原料供給", oroshi_supplies_path, class: "nav-link light_link" %></li>
            <li class="nav-item"><%= link_to "注文記載", oroshi_orders_path, class: "nav-link light_link" %></li>
            <li class="nav-item"><%= link_to "注文明細", oroshi_search_orders_path, class: "nav-link light_link" %></li>
            <% if current_user.vip? || current_user.admin? %>
            <li><%= link_to "入金", oroshi_payment_receipts_path, class: "nav-link light_link" %></li>
            <li><%= link_to '原料設定', oroshi_root_path, class: "nav-link light_link" %></li>
            <li><%= link_to "商品設定", oroshi_products_path, class: "nav-link light_link" %></li>
            <li><%= link_to "材料設定", oroshi_materials_path, class: "nav-link light_link" %></li>
            <% end %>
        </ul>
        <ul class="navbar-nav">
            <% if user_signed_in? %>
            <span class="navbar-text">
                <div class="btn-group" role="group" aria-label="Basic">
                    <%= button_to destroy_user_session_path,
                            id: "sign_out",
                            class: "bg-info border-0 p-0 m-0", 
                            method: :delete, 
                            form_class: 'navbar-link btn btn-info tippy',
                            form: { data: { tippy_content: "ログアウト", turbo: false } } do %>
                    <%= icon("arrow-up-right-circle-fill", class: 'text-warning') %>
                    <% end %>
                    <%= link_to icon("file-person", class: 'text-primary'), 
                          edit_user_registration_path, 
                          class: 'navbar-link btn btn-info tippy',
                          data: {
                            tippy_content: "
                              メール<strong>:<br><small>#{current_user.email}
                              </small></strong><br>ユーザー名<strong>:<br>#{current_user.username}
                            "
                          } %>
                </div>
            </span>
            <% else %>
            <span class="ms-auto navbar-text">
                <%= link_to "サインアップ", new_user_registration_path, class: 'navbar-link'  %> |
                <%= link_to "ログイン", new_user_session_path, method: :post, class: 'navbar-link'  %>
            </span>
            <% end %>
        </ul>
        <% else %>
        <span class="ms-auto navbar-text">
            <%= link_to "サインアップ", new_user_registration_path, class: 'navbar-link'  %> |
            <%= link_to "ログイン", new_user_session_path, method: :post, class: 'navbar-link'  %>
            <% end %>
    </div>
</nav>