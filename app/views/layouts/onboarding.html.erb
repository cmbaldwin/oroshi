<!doctype html>
<html dir="ltr" lang="ja" class="h-100">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="Oroshi Onboarding">
<meta name="author" content="Cody Baldwin">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

<head>
    <title><%= content_for?(:title) ? content_for(:title) : "Oroshi Onboarding" %></title>

    <%= capybara_lockstep if defined?(Capybara::Lockstep) %>
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />

    <%# Google Fonts - Playfair Display for OROSHI branding %>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@900&display=swap" rel="stylesheet">

    <%= action_cable_meta_tag %>
    <%= turbo_refreshes_with method: :morph, scroll: :preserve  %>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= yield :head %>
</head>

<body class="onboarding-container">
    <div class="onboarding-header">
        <div class="onboarding-brand">OROSHI</div>
        <%= render 'layouts/onboarding/progress' if @progress %>
    </div>

    <div class="onboarding-main">
        <div class="onboarding-card">
            <%= yield %>
        </div>
    </div>

    <div class="onboarding-footer">
        <%= button_to "Skip for now", skip_oroshi_onboarding_path(@step || 'welcome'), 
            method: :post, 
            class: "btn btn-onboarding-skip",
            form: { data: { turbo_confirm: "Are you sure you want to skip onboarding? You can resume later from your dashboard." } } %>
        
        <div class="d-flex gap-2">
            <% if @step && Oroshi::OnboardingController::ALL_STEPS.index(@step)&.positive? %>
                <% prev_step = Oroshi::OnboardingController::ALL_STEPS[Oroshi::OnboardingController::ALL_STEPS.index(@step) - 1] %>
                <%= link_to "Back", oroshi_onboarding_path(prev_step), class: "btn btn-onboarding-back" %>
            <% end %>
            
            <%= button_tag "Next", type: "submit", form: "onboarding-form", class: "btn btn-onboarding-next" %>
        </div>
    </div>
</body>
</html>
