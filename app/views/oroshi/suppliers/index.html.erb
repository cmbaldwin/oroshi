<%= turbo_frame_tag 'suppliers', class: 'card' do %>
<div class="card-body pb-0 pt-2">
    <div class="card-title d-flex justify-content-between align-items-center align-middle">
        <div class="d-flex justify-content-between align-items-center align-middle flex-grow-1 me-2">
            <div class="d-flex justify-content-start align-items-center align-middle">
                <h5 class="m-0">
                    <%= t('oroshi.dashboard.edit_sub_models', 
                    parent_name: @supplier_organization.entity_name, 
                    model_name: Oroshi::Supplier.model_name.human) if @supplier_organization%>
                </h5>
            </div>
            <%= information_tippy('suppliers_edit') %>
        </div>
        <div class="d-flex justify-content-center align-items-end align-middle">
            <%= content_tag :div, class: 'form-check form-switch d-flex justify-content-between align-items-center align-middle me-3' do %>
            <%= content_tag :input, 
                          nil, 
                          class: 'form-check-input me-2', 
                          type: 'checkbox', 
                          id: 'activeToggle', 
                          data: { 
                            action: 'change->oroshi--dashboard#toggleShowInactive',
                            target: 'suppliers'
                          }, 
                          checked: @show_inactive %>
            <%= label_tag 'activeToggle', t('oroshi.dashboard.display_all'), class: 'form-check-label' %>
            <% end %>
            <%= link_to t('oroshi.dashboard.add_record'),
                    new_oroshi_supplier_organization_supplier_path(@supplier_organization),
                    class: 'btn btn-sm btn-success',
                    data: {
                      turbo_frame: 'oroshi_modal_content',
                      action: 'oroshi--dashboard#showModal:passive'
                    } %>
        </div>
    </div>
</div>
<div class="card-body pt-0 frame collapse show">
    <% if @supplier_organization %>
    <div class="list-group">
        <% unless @suppliers.empty? %>
        <% @suppliers.each do |supplier| %>
        <%= turbo_frame_tag dom_id(supplier),
                                class: "list-group-item list-group-item-primary #{'list-group-item-light opacity-50' unless supplier.active?}",
                                src: edit_oroshi_supplier_path(supplier),
                                data: {
                                  oroshi__dashboard_target: 'supplier',
                                  active: supplier.active?
                                },
                                loading: 'lazy' do %>
        <div class="d-flex w-100 text-center justify-content-center align-items-center align-middle">
            <div class="spinner-border spinner-border-sm" role="status">
                <span class="visually-hidden">
                    <%= t('oroshi.dashboard.loading') %>
                </span>
            </div>
        </div>
        <% end %>
        <% end %>
        <% else %>
        <div class="alert alert-warning" role="alert">
            <%= t('oroshi.dashboard.no_record_warning', model_name: Oroshi::Supplier.model_name.human) %>
        </div>
        <% end %>
    </div>
    <% else %>
    <div class="alert alert-warning" role="alert">
        <%= t('oroshi.dashboard.no_record_warning', model_name: Oroshi::SupplierOrganization.model_name.human) %>
    </div>
    <% end %>
</div>
<% end %>