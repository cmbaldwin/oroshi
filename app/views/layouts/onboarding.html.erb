<!doctype html>
<html dir="ltr" lang="ja" class="h-100">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="Oroshi Onboarding">
<meta name="author" content="Cody Baldwin">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

<head>
    <title><%= content_for?(:title) ? content_for(:title) : "Oroshi Onboarding" %></title>

    <%= capybara_lockstep if defined?(Capybara::Lockstep) %>
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />

    <%= action_cable_meta_tag %>
    <%= turbo_refreshes_with method: :morph, scroll: :preserve  %>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= yield :head %>
</head>

<body class="onboarding-container">
    <div class="onboarding-header">
        <div class="onboarding-brand">
            <%= image_tag "oroshi.png", class: "oroshi-brand", alt: "OROSHI", height: 30 %>
        </div>
        <%= render 'layouts/onboarding/progress' if @progress %>
    </div>

    <div class="onboarding-main">
        <div class="onboarding-card">
            <%= yield %>
        </div>
    </div>

    <div class="onboarding-footer">
        <%= button_to t('common.buttons.skip_for_now'), skip_oroshi_onboarding_path(@step || 'welcome'),
            method: :post,
            class: "btn btn-outline-secondary",
            form: { data: { turbo_confirm: t('common.confirmations.skip_onboarding') } } %>

        <div class="d-flex gap-2">
            <% if @step && Oroshi::OnboardingController::ALL_STEPS.index(@step)&.positive? %>
            <% prev_step = Oroshi::OnboardingController::ALL_STEPS[Oroshi::OnboardingController::ALL_STEPS.index(@step) - 1] %>
            <%= link_to t('oroshi.onboarding.buttons.back'), oroshi_onboarding_path(prev_step), class: "btn btn-secondary" %>
            <% end %>

            <%= button_tag t('oroshi.onboarding.buttons.next'), type: "submit", form: "onboarding-form", class: "btn btn-primary" %>
        </div>
    </div>
</body>

</html>