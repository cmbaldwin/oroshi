<%= turbo_frame_tag 'shipping_methods', class: 'card' do %>
<div class="card-body pb-0 pt-2">
    <div class="card-title d-flex justify-content-between align-items-center align-middle">
        <div class="d-flex justify-content-start align-items-center align-middle">
            <h5 class="m-0">
                <%= t('oroshi.dashboard.edit_sub_models', 
                    parent_name: @shipping_organization.name, 
                    model_name: Oroshi::ShippingMethod.model_name.human) if @shipping_organization %>
            </h5>
        </div>
        <div class="d-flex justify-content-center align-items-end align-middle">
            <%= content_tag :div, class: 'form-check form-switch d-flex justify-content-between align-items-center align-middle me-3' do %>
            <%= content_tag :input, 
                          nil, 
                          class: 'form-check-input me-2', 
                          type: 'checkbox', 
                          id: 'activeToggle', 
                          data: { 
                            action: 'change->oroshi--dashboard#toggleShowInactive',
                            target: 'shipping_methods'
                          }, 
                          checked: @show_inactive %>
            <%= label_tag 'activeToggle', t('oroshi.dashboard.display_all'), class: 'form-check-label' %>
            <% end %>
            <%= link_to t('oroshi.dashboard.add_record'),
                    new_oroshi_shipping_organization_shipping_method_path(@shipping_organization),
                    class: 'btn btn-sm btn-success',
                    data: {
                      turbo_frame: 'oroshi_modal_content',
                      action: 'oroshi--dashboard#showModal:passive'
                    } %>
        </div>
    </div>
</div>
<div class="card-body pt-0 frame collapse show">
    <% if @shipping_organization %>
    <div class="list-group">
        <% unless @shipping_methods.empty? %>
        <% @shipping_methods.each do |shipping_method| %>
        <%= turbo_frame_tag dom_id(shipping_method),
                                class: "list-group-item list-group-item-primary #{'list-group-item-light opacity-50' unless shipping_method.active?}",
                                src: edit_oroshi_shipping_method_path(shipping_method),
                                data: {
                                  oroshi__dashboard_target: 'shipping_method',
                                  active: shipping_method.active?
                                },
                                loading: 'lazy' do %>
        <div class="d-flex w-100 text-center justify-content-center align-items-center align-middle">
            <div class="spinner-border spinner-border-sm" role="status">
                <%= t('oroshi.dashboard.loading') %>
            </div>
        </div>
        <% end %>
        <% end %>
        <% else %>
        <div class="alert alert-warning" role="alert">
            <%= t('oroshi.dashboard.no_record_warning', model_name: Oroshi::ShippingMethod.model_name.human) %>
        </div>
        <% end %>
    </div>
    <% else %>
    <div class="alert alert-warning" role="alert">
        <%= t('oroshi.dashboard.no_record_warning', model_name: Oroshi::ShippingOrganization.model_name.human) %>
    </div>
    <% end %>
</div>
<% end %>